import{randomBytes as t,createCipheriv as e,createDecipheriv as i,createHash as a,scrypt as n,createSecretKey as s}from"crypto";import o,{AxiosError as r}from"axios";import{EventEmitter as h}from"events";import c from"eventsource";import{config as u}from"dotenv";class d{key;alg;constructor(t,e){this.key=t,this.alg=e}encrypt(i){const a=t(16),n=e(this.alg,this.key,a),s=Buffer.concat([n.update(i),n.final()]),o=n.getAuthTag();return Buffer.concat([a,o,s])}decrypt(t){const e=t.subarray(0,16),a=t.subarray(16,32),n=t.subarray(32),s=i(this.alg,this.key,e);return s.setAuthTag(a),Buffer.concat([s.update(n),s.final()])}}class l{_encKey;_authKey;username;derivationOptions;initialized;_initialized;constructor(t,e,i){this.username=t,this.derivationOptions=i,this._initialized=!1,this.initialized=this.init(e)}async init(t){const{master:e,auth:i,enc:a}=this.derivationOptions,n=m(e.salt_hashing_algorithm,e.salt_pattern,{username:this.username}),s=await p(t,{...e,salt:n}),o=m(i.salt_hashing_algorithm,i.salt_pattern,{username:this.username}),r=m(a.salt_hashing_algorithm,a.salt_pattern,{username:this.username}),[h,c]=await Promise.all([p(s,{...i,salt:o}),p(s,{...a,salt:r})]);this._authKey=h,this._encKey=new d(c,a.enc_algorithm),this._initialized=!0}get authKey(){if(!this._initialized)throw new Error("Unable to get authKey. KeyManager not initialized",{cause:"You may have forgotten to await keymanager.initialized or just to login"});return this._authKey.export().toString("base64url")}get encKey(){if(!this._initialized)throw new Error("Unable to get encKey. KeyManager not initialized",{cause:"You may have forgotten to await keymanager.initialized or just to login"});return this._encKey}}function m(t,e,i){let n="";for(const t in i)n=e.replace(t,i[t]);return a(t).update(n).digest()}async function p(t,e){const i={...e.alg_options,maxmem:256*e.alg_options.N*e.alg_options.r},a="string"==typeof t?t:t.export(),o=new Promise(((t,o)=>{n(a,e.salt,e.derived_key_length,i,((e,i)=>{null!==e&&o(e),t(s(i))}))}));return await o}u();const w=(t,e)=>{let i=`Invalid value for ${t}. `;return void 0!==e&&(i+=`Allowed values are ${e} `),i},g=["0","false","FALSE"],v=["1","true","FALSE"],f=g.concat(v);function y(t,e){const i=void 0===(a=process.env[t])?"":a;var a;const n=(e=e??{})?.isBoolean??!1;if(n&&(e={...e,allowedValues:f}),""===i){if(void 0!==e.defaultValue)return e.defaultValue;if(void 0!==e.allowedValues&&!e.allowedValues.includes(""))throw new RangeError(w(t,e.allowedValues.join(", ")))}if(n&&v.includes(i))return!0;if(n&&g.includes(i))return!1;if(void 0!==e.allowedValues&&!e.allowedValues.includes(i))throw new RangeError(w(t,e.allowedValues.join(", ")));return i}y("NODE_ENV",{defaultValue:"production",allowedValues:["production","development"]});const _="v"+y("npm_package_version",{defaultValue:"0.0.1"})[0];class k extends Error{data;message;constructor(t,e,i){super(t,i),this.name="VaultError",this.data=e,this.message=t}static from(t){if(t instanceof k)return t;if(t instanceof Event)return new k("sse-connection-error",t,{cause:"Likely issues connecting to the events endpoint of the cloud vault server"});if(t instanceof r){if("Unauthorized"===t.response?.data.name)return new k("unauthorized",void 0);if(404===t.response?.status&&"no storage"===t.response.data.name)return new k("no-uploadded-storage",void 0);const e={request:{method:t.config?.method?.toLocaleUpperCase(),url:t.config?.url,headers:t.config?.headers,data:t.config?.data},response:{status:t.response?.status,headers:t.response?.headers,data:t.response?.data}};return new k("http-connection-error",e)}if(t instanceof Error){const e=new k("error",t,{cause:t.cause});return e.stack=t.stack,e}return new k("unknown",t)}}class z extends h{timestamp;token;name;serverUrl;username;password;keyManager;wellKnownCvsConfiguration;initialized;es;constructor(e,i,a,n){super({captureRejections:!0}),this.name=n??t(16).toString("hex"),this.serverUrl=e,this.username=i,this.password=a,this.initialized=this.init()}emit(t,...e){return super.emit(t,...e)}on(t,e){return super.on(t,e)}once(t,e){return super.once(t,e)}async init(){try{await this.getWellKnownCvsConfiguration();const t=this.wellKnownCvsConfiguration;this.keyManager=new l(this.username,this.password,t.vault_configuration[_].key_derivation),await this.keyManager.initialized,delete this.password}catch(t){throw k.from(t)}}async getWellKnownCvsConfiguration(){const t=await o.get(this.serverUrl+"/.well-known/cvs-configuration");this.wellKnownCvsConfiguration=t.data}async initEventSourceClient(){if(void 0===this.token)throw new k("unauthorized",void 0);const t=this.wellKnownCvsConfiguration;this.es=new c(this.serverUrl+t.vault_configuration[_].events_endpoint,{headers:{Authorization:"Bearer "+this.token}}),this.es.onmessage=t=>{console.log(t)},this.es.addEventListener("connected",(t=>{const e=JSON.parse(t.data);this.timestamp=e.timestamp,this.emit("connected",e.timestamp)})),this.es.addEventListener("storage-updated",(t=>{const e=JSON.parse(t.data);e.timestamp!==this.timestamp&&(this.timestamp=e.timestamp,this.emit("storage-updated",this.timestamp))})),this.es.addEventListener("storage-deleted",(t=>{delete this.timestamp,this.logout(),this.emit("storage-deleted")})),this.es.onerror=t=>{this.emitError(t)}}emitError(t){const e=k.from(t);switch(e.message){case"unauthorized":this.logout(),this.emit("logged-out");break;case"sse-connection-error":this.emit("connection-error",e);break;default:this.emit("error",e)}}logout(){this.es?.close(),this.token=void 0,this.emit("logged-out")}async getAuthKey(){return await this.initialized.catch((t=>{throw new k("not-initialized",t)})),this.keyManager.authKey}async login(){await this.initialized.catch((t=>{throw new k("not-initialized",t)}));const t={username:this.username,authkey:this.keyManager.authKey},e=this.wellKnownCvsConfiguration,i=await o.post(this.serverUrl+e.vault_configuration.v2.token_endpoint,t).catch((t=>{throw k.from(t)}));if(200!==i.status)throw new k("validation",{description:`Received HTTP status ${i.status} does not match the expected one (200)`},{cause:"HTTP status does not match the expected one"});const a=i.data;this.token=a.token,await this.initEventSourceClient().catch((t=>{throw k.from(t)}))}async getRemoteStorageTimestamp(){if(await this.initialized.catch((t=>{throw new k("not-initialized",t)})),void 0===this.token)throw new k("unauthorized",void 0);const t=this.wellKnownCvsConfiguration,e=await o.get(this.serverUrl+t.vault_configuration[_].timestamp_endpoint,{headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}}).catch((t=>{throw k.from(t)}));if(200!==e.status)throw new k("validation",{description:`Received HTTP status ${e.status} does not match the expected one (200)`},{cause:"HTTP status does not match the expected one"});return(this.timestamp??0)<e.data.timestamp&&(this.timestamp=e.data.timestamp),e.data.timestamp}async getStorage(){if(await this.initialized.catch((t=>{throw new k("not-initialized",t)})),void 0===this.token)throw new k("unauthorized",void 0);try{const t=this.wellKnownCvsConfiguration,e=this.keyManager.encKey,i=await o.get(this.serverUrl+t.vault_configuration[_].vault_endpoint,{headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});if(200!==i.status)throw new k("validation",{description:`Received HTTP status ${i.status} does not match the expected one (200)`},{cause:"HTTP status does not match the expected one"});if(i.data.timestamp<(this.timestamp??0))throw new k("validation",{description:"WEIRD!!! Received timestamp is older than the one received in previous events"});const a=e.decrypt(Buffer.from(i.data.ciphertext,"base64url"));return this.timestamp=i.data.timestamp,{storage:a,timestamp:i.data.timestamp}}catch(t){throw k.from(t)}}async updateStorage(t,e=!1){if(await this.initialized.catch((t=>{throw new k("not-initialized",t)})),void 0===this.token)throw new k("unauthorized",void 0);if(void 0!==this.timestamp&&(t.timestamp??0)<this.timestamp)throw new k("conflict",{localTimestamp:t.timestamp,remoteTimestamp:this.timestamp});try{const i=this.wellKnownCvsConfiguration,a=this.keyManager.encKey;if(e){const e=await this.getRemoteStorageTimestamp();t.timestamp=null!==e?e:void 0}const n={ciphertext:a.encrypt(t.storage).toString("base64url"),timestamp:t.timestamp},s=await o.post(this.serverUrl+i.vault_configuration[_].vault_endpoint,n,{headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}});if(201!==s.status)throw new k("validation",{description:`Received HTTP status ${s.status} does not match the expected one (201)`},{cause:"HTTP status does not match the expected one"});this.timestamp=s.data.timestamp}catch(t){throw k.from(t)}}async deleteStorage(){if(await this.initialized.catch((t=>{throw new k("not-initialized",t)})),void 0===this.token)throw new k("unauthorized",void 0);try{const t=this.wellKnownCvsConfiguration,e=await o.delete(this.serverUrl+t.vault_configuration[_].vault_endpoint,{headers:{Authorization:"Bearer "+this.token}});if(204!==e.status)throw new k("validation",{description:`Received HTTP status ${e.status} does not match the expected one (204)`},{cause:"HTTP status does not match the expected one"});delete this.timestamp,this.logout()}catch(t){throw k.from(t)}}async getServerPublicKey(){try{await this.getWellKnownCvsConfiguration();const t=this.wellKnownCvsConfiguration,e=await o.get(this.serverUrl+t.registration_configuration.public_jwk_endpoint);if(200!==e.status)throw new k("validation",{description:`Received HTTP status ${e.status} does not match the expected one (200)`},{cause:"HTTP status does not match the expected one"});return e.data.jwk}catch(t){throw k.from(t)}}}export{l as KeyManager,d as SecretKey,z as VaultClient,p as deriveKey};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubm9kZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3RzL3NlY3JldC1rZXkudHMiLCIuLi8uLi9zcmMvdHMva2V5LW1hbmFnZXIudHMiLCIuLi8uLi9zcmMvdHMvY29uZmlnL3BhcnNlUHJvY2Vzc0VudlZhci50cyIsIi4uLy4uL3NyYy90cy9jb25maWcvaW5kZXgudHMiLCIuLi8uLi9zcmMvdHMvZXJyb3IudHMiLCIuLi8uLi9zcmMvdHMvdmF1bHQtY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpudWxsLCJuYW1lcyI6WyJTZWNyZXRLZXkiLCJrZXkiLCJhbGciLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJlbmNyeXB0IiwiaW5wdXQiLCJpdiIsInJhbmRvbUJ5dGVzIiwiY2lwaGVyIiwiY3JlYXRlQ2lwaGVyaXYiLCJlbmNyeXB0ZWQiLCJCdWZmZXIiLCJjb25jYXQiLCJ1cGRhdGUiLCJmaW5hbCIsInRhZyIsImdldEF1dGhUYWciLCJkZWNyeXB0Iiwic3ViYXJyYXkiLCJjaXBoZXJ0ZXh0IiwiZGVjaXBoZXIiLCJjcmVhdGVEZWNpcGhlcml2Iiwic2V0QXV0aFRhZyIsIktleU1hbmFnZXIiLCJfZW5jS2V5IiwiX2F1dGhLZXkiLCJ1c2VybmFtZSIsImRlcml2YXRpb25PcHRpb25zIiwiaW5pdGlhbGl6ZWQiLCJfaW5pdGlhbGl6ZWQiLCJwYXNzd29yZCIsIm9wdHMiLCJpbml0IiwiYXN5bmMiLCJtYXN0ZXIiLCJhdXRoIiwiZW5jIiwibWFzdGVyU2FsdCIsIl9zYWx0Iiwic2FsdF9oYXNoaW5nX2FsZ29yaXRobSIsInNhbHRfcGF0dGVybiIsIm1hc3RlcktleSIsImRlcml2ZUtleSIsInNhbHQiLCJhdXRoU2FsdCIsImVuY1NhbHQiLCJhdXRoS2V5IiwiZW5jS2V5IiwiUHJvbWlzZSIsImFsbCIsImVuY19hbGdvcml0aG0iLCJFcnJvciIsImNhdXNlIiwiZXhwb3J0IiwidG9TdHJpbmciLCJoYXNoQWxnb3JpdGhtIiwic2FsdFBhdHRlcm4iLCJyZXBsYWNlbWVudHMiLCJzYWx0U3RyaW5nIiwic2VhcmNoVmFsdWUiLCJyZXBsYWNlIiwiY3JlYXRlSGFzaCIsImRpZ2VzdCIsInBhc3N3b3JkT3JLZXkiLCJzY3J5cHRPcHRpb25zIiwiYWxnX29wdGlvbnMiLCJtYXhtZW0iLCJOIiwiciIsImtleVByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2NyeXB0IiwiZGVyaXZlZF9rZXlfbGVuZ3RoIiwiZXJyIiwiY3JlYXRlU2VjcmV0S2V5IiwibG9hZEVudkZpbGUiLCJpbnZhbGlkTXNnIiwidmFybmFtZSIsInZhbHVlcyIsInJldCIsInVuZGVmaW5lZCIsImJvb2xlYW5GYWxzZUFsbG93ZWRWYWx1ZXMiLCJib29sZWFuVHJ1ZUFsbG93ZWRWYWx1ZXMiLCJib29sZWFuQWxsb3dlZFZhbHVlcyIsInBhcnNlUHJvY2Nlc3NFbnZWYXIiLCJ2YXJOYW1lIiwib3B0aW9ucyIsInZhbHVlIiwiYSIsInByb2Nlc3MiLCJlbnYiLCJpc0Jvb2xlYW4iLCJhbGxvd2VkVmFsdWVzIiwiZGVmYXVsdFZhbHVlIiwiaW5jbHVkZXMiLCJSYW5nZUVycm9yIiwiam9pbiIsImFwaVZlcnNpb24iLCJWYXVsdEVycm9yIiwiZGF0YSIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJzdGF0aWMiLCJlcnJvciIsIkV2ZW50IiwiQXhpb3NFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwidmF1bHRDb25uRXJyb3IiLCJyZXF1ZXN0IiwibWV0aG9kIiwiY29uZmlnIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJ1cmwiLCJoZWFkZXJzIiwidmF1bHRFcnJvciIsInN0YWNrIiwiVmF1bHRDbGllbnQiLCJFdmVudEVtaXR0ZXIiLCJ0aW1lc3RhbXAiLCJ0b2tlbiIsInNlcnZlclVybCIsImtleU1hbmFnZXIiLCJ3ZWxsS25vd25DdnNDb25maWd1cmF0aW9uIiwiZXMiLCJjYXB0dXJlUmVqZWN0aW9ucyIsImVtaXQiLCJldmVudE5hbWUiLCJhcmdzIiwib24iLCJsaXN0ZW5lciIsIm9uY2UiLCJnZXRXZWxsS25vd25DdnNDb25maWd1cmF0aW9uIiwiY3ZzQ29uZiIsInZhdWx0X2NvbmZpZ3VyYXRpb24iLCJrZXlfZGVyaXZhdGlvbiIsImZyb20iLCJyZXMiLCJheGlvcyIsImdldCIsIkV2ZW50U291cmNlIiwiZXZlbnRzX2VuZHBvaW50IiwiQXV0aG9yaXphdGlvbiIsIm9ubWVzc2FnZSIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIkpTT04iLCJwYXJzZSIsImxvZ291dCIsIm9uZXJyb3IiLCJlbWl0RXJyb3IiLCJjbG9zZSIsImNhdGNoIiwicmVxQm9keSIsImF1dGhrZXkiLCJwb3N0IiwidjIiLCJ0b2tlbl9lbmRwb2ludCIsImRlc2NyaXB0aW9uIiwiYm9keSIsImluaXRFdmVudFNvdXJjZUNsaWVudCIsInRpbWVzdGFtcF9lbmRwb2ludCIsInZhdWx0X2VuZHBvaW50Iiwic3RvcmFnZSIsImZvcmNlIiwibG9jYWxUaW1lc3RhbXAiLCJyZW1vdGVUaW1lc3RhbXAiLCJnZXRSZW1vdGVTdG9yYWdlVGltZXN0YW1wIiwicmVxdWVzdEJvZHkiLCJkZWxldGUiLCJyZWdpc3RyYXRpb25fY29uZmlndXJhdGlvbiIsInB1YmxpY19qd2tfZW5kcG9pbnQiLCJqd2siXSwibWFwcGluZ3MiOiI2UUFHYUEsRUFDTUMsSUFDUkMsSUFFVEMsWUFBYUYsRUFBZ0JDLEdBQzNCRSxLQUFLSCxJQUFNQSxFQUNYRyxLQUFLRixJQUFNQSxDQUNaLENBRURHLFFBQVNDLEdBRVAsTUFBTUMsRUFBS0MsRUFBWSxJQUdqQkMsRUFBU0MsRUFBZU4sS0FBS0YsSUFBS0UsS0FBS0gsSUFBS00sR0FHNUNJLEVBQVlDLE9BQU9DLE9BQU8sQ0FBQ0osRUFBT0ssT0FBT1IsR0FBUUcsRUFBT00sVUFHeERDLEVBQU1QLEVBQU9RLGFBR25CLE9BQU9MLE9BQU9DLE9BQU8sQ0FBQ04sRUFBSVMsRUFBS0wsR0FDaEMsQ0FFRE8sUUFBU1osR0FFUCxNQUFNQyxFQUFLRCxFQUFNYSxTQUFTLEVB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
